<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Syncular — Observable Universe</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter+Tight:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            display: ['"Inter Tight"', 'system-ui', 'sans-serif'],
            mono: ['"JetBrains Mono"', 'monospace'],
          },
          colors: {
            surface: '#0c0c0c',
            panel: '#111111',
            border: '#1e1e1e',
            'border-bright': '#2a2a2a',
            healthy: '#22c55e',
            syncing: '#f59e0b',
            offline: '#ef4444',
            flow: '#3b82f6',
            relay: '#8b5cf6',
          },
        },
      },
    };
  </script>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    html { scroll-behavior: smooth; }
    body {
      font-family: 'Inter Tight', system-ui, sans-serif;
      background: #0c0c0c;
      color: #e5e5e5;
      overflow-x: hidden;
    }
    .font-mono { font-family: 'JetBrains Mono', monospace !important; }

    /* Status dot pulse */
    @keyframes dotPulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.4; }
    }
    .dot-online { color: #22c55e; }
    .dot-syncing { color: #f59e0b; animation: dotPulse 1s ease-in-out infinite; }
    .dot-offline { color: #ef4444; }

    /* Scrolling commit stream */
    @keyframes streamSlide {
      0% { opacity: 0; transform: translateY(-8px); }
      10% { opacity: 1; transform: translateY(0); }
      90% { opacity: 1; }
      100% { opacity: 0.3; }
    }

    /* Connection line animation */
    @keyframes dashFlow {
      0% { stroke-dashoffset: 20; }
      100% { stroke-dashoffset: 0; }
    }
    .line-active {
      stroke-dasharray: 4 2;
      animation: dashFlow 1s linear infinite;
    }
    .line-syncing {
      stroke-dasharray: 8 4;
      animation: dashFlow 0.5s linear infinite;
    }
    .line-offline {
      stroke-dasharray: 3 6;
      opacity: 0.3;
    }

    /* Metric counter tick */
    @keyframes counterTick {
      0% { opacity: 1; }
      50% { opacity: 0.6; }
      100% { opacity: 1; }
    }

    /* Orbit animation for node graph */
    @keyframes orbit {
      0% { transform: rotate(0deg) translateX(var(--orbit-r)) rotate(0deg); }
      100% { transform: rotate(360deg) translateX(var(--orbit-r)) rotate(-360deg); }
    }

    /* Gentle glow on server node */
    @keyframes serverGlow {
      0%, 100% { filter: drop-shadow(0 0 6px rgba(59, 130, 246, 0.4)); }
      50% { filter: drop-shadow(0 0 14px rgba(59, 130, 246, 0.7)); }
    }

    /* Stream entry fade */
    .stream-entry {
      animation: streamSlide 8s ease-out forwards;
    }

    /* Panel hover */
    .dashboard-panel {
      border: 1px solid #1e1e1e;
      background: #111111;
      transition: border-color 0.2s;
    }
    .dashboard-panel:hover {
      border-color: #2a2a2a;
    }

    /* Code block styling */
    .code-block {
      background: #0f0f0f;
      border: 1px solid #1e1e1e;
      border-radius: 8px;
      overflow: hidden;
    }
    .code-block pre {
      padding: 1.25rem;
      overflow-x: auto;
      font-size: 0.8125rem;
      line-height: 1.7;
    }
    .code-header {
      padding: 0.625rem 1.25rem;
      border-bottom: 1px solid #1e1e1e;
      font-size: 0.75rem;
      color: #666;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    /* Scrollbar */
    ::-webkit-scrollbar { width: 4px; height: 4px; }
    ::-webkit-scrollbar-track { background: transparent; }
    ::-webkit-scrollbar-thumb { background: #333; border-radius: 2px; }

    /* Architecture flow */
    .arch-arrow {
      position: relative;
    }
    .arch-arrow::after {
      content: '';
      position: absolute;
      top: 50%;
      right: -20px;
      width: 28px;
      height: 2px;
      background: linear-gradient(90deg, #3b82f6, transparent);
    }
  </style>
</head>
<body>

  <!-- ========== NAV ========== -->
  <nav class="fixed top-0 left-0 right-0 z-50 border-b border-border" style="background: rgba(12,12,12,0.92); backdrop-filter: blur(12px);">
    <div class="max-w-[1400px] mx-auto px-6 h-12 flex items-center justify-between">
      <div class="flex items-center gap-3">
        <span class="font-display font-bold text-white text-sm tracking-tight">syncular</span>
        <span class="w-1.5 h-1.5 rounded-full bg-healthy inline-block" style="box-shadow: 0 0 6px #22c55e;"></span>
        <span class="font-mono text-[10px] text-healthy/70 uppercase tracking-widest">operational</span>
      </div>
      <div class="flex items-center gap-6">
        <a href="#explanation" class="font-mono text-[11px] text-neutral-500 hover:text-white transition-colors uppercase tracking-wider">Overview</a>
        <a href="#code" class="font-mono text-[11px] text-neutral-500 hover:text-white transition-colors uppercase tracking-wider">Code</a>
        <a href="#architecture" class="font-mono text-[11px] text-neutral-500 hover:text-white transition-colors uppercase tracking-wider">Architecture</a>
        <a href="#install" class="font-mono text-[11px] text-neutral-500 hover:text-white transition-colors uppercase tracking-wider">Install</a>
        <a href="https://github.com/patchwork-body/syncular" class="font-mono text-[11px] text-neutral-400 hover:text-white transition-colors border border-border px-3 py-1 rounded">GitHub</a>
      </div>
    </div>
  </nav>

  <!-- ========== HERO ========== -->
  <section class="pt-16 pb-4 min-h-screen flex flex-col">
    <!-- Title bar -->
    <div class="max-w-[1400px] mx-auto w-full px-6 pt-6 pb-4">
      <h1 class="font-display font-bold text-3xl md:text-4xl text-white leading-tight">
        Your sync universe, in real-time.
      </h1>
      <p class="font-display text-base text-neutral-500 mt-2 max-w-2xl">
        Every commit. Every client. Every sync. Offline-first SQLite sync you can actually see.
      </p>
    </div>

    <!-- Dashboard grid -->
    <div class="max-w-[1400px] mx-auto w-full px-6 flex-1 grid grid-cols-1 lg:grid-cols-[320px_1fr_320px] gap-3 pb-3" style="min-height: 520px;">

      <!-- LEFT PANEL: Connected Clients -->
      <div class="dashboard-panel rounded-lg flex flex-col">
        <div class="px-4 py-3 border-b border-border flex items-center justify-between">
          <span class="font-mono text-[11px] text-neutral-400 uppercase tracking-wider">Connected Clients</span>
          <span class="font-mono text-[11px] text-neutral-600" id="clientCount">7 nodes</span>
        </div>
        <div class="flex-1 overflow-auto p-2 space-y-1" id="clientList">
          <!-- Populated by JS -->
        </div>
      </div>

      <!-- CENTER PANEL: Node Graph -->
      <div class="dashboard-panel rounded-lg flex flex-col items-center justify-center relative overflow-hidden" style="background-image: radial-gradient(circle at 1px 1px, #1a1a1a 1px, transparent 0); background-size: 24px 24px;">
        <div class="absolute top-3 left-4 z-10">
          <span class="font-mono text-[11px] text-neutral-400 uppercase tracking-wider">Sync Topology</span>
        </div>
        <svg id="nodeGraph" viewBox="0 0 660 420" class="w-full max-w-[660px] h-auto" style="min-height: 320px;"></svg>
      </div>

      <!-- RIGHT PANEL: Commit Stream -->
      <div class="dashboard-panel rounded-lg flex flex-col">
        <div class="px-4 py-3 border-b border-border flex items-center justify-between">
          <span class="font-mono text-[11px] text-neutral-400 uppercase tracking-wider">Commit Stream</span>
          <span class="font-mono text-[11px] text-healthy" id="streamRate">12.4/s</span>
        </div>
        <div class="flex-1 overflow-hidden relative" id="commitStream">
          <div class="absolute inset-x-0 top-0 h-6 z-10" style="background: linear-gradient(to bottom, #111111, transparent);"></div>
          <div class="absolute inset-x-0 bottom-0 h-8 z-10" style="background: linear-gradient(to top, #111111, transparent);"></div>
          <div class="p-3 space-y-0.5 overflow-hidden" id="streamEntries" style="max-height: 100%;">
            <!-- Populated by JS -->
          </div>
        </div>
      </div>
    </div>

    <!-- BOTTOM STRIP: Live Metrics -->
    <div class="max-w-[1400px] mx-auto w-full px-6 pb-6">
      <div class="dashboard-panel rounded-lg px-6 py-3 flex items-center justify-between flex-wrap gap-4">
        <div class="flex items-center gap-2">
          <span class="w-1.5 h-1.5 rounded-full bg-flow inline-block"></span>
          <span class="font-mono text-[11px] text-neutral-500 uppercase">Commits/sec</span>
          <span class="font-mono text-sm text-white font-medium" id="metricCommits">12.4</span>
        </div>
        <div class="w-px h-4 bg-border"></div>
        <div class="flex items-center gap-2">
          <span class="w-1.5 h-1.5 rounded-full bg-healthy inline-block"></span>
          <span class="font-mono text-[11px] text-neutral-500 uppercase">Avg Sync Latency</span>
          <span class="font-mono text-sm text-white font-medium" id="metricLatency">34ms</span>
        </div>
        <div class="w-px h-4 bg-border"></div>
        <div class="flex items-center gap-2">
          <span class="w-1.5 h-1.5 rounded-full bg-syncing inline-block"></span>
          <span class="font-mono text-[11px] text-neutral-500 uppercase">Active Clients</span>
          <span class="font-mono text-sm text-white font-medium" id="metricActive">5/7</span>
        </div>
        <div class="w-px h-4 bg-border"></div>
        <div class="flex items-center gap-2">
          <span class="w-1.5 h-1.5 rounded-full bg-healthy inline-block"></span>
          <span class="font-mono text-[11px] text-neutral-500 uppercase">Uptime</span>
          <span class="font-mono text-sm text-white font-medium" id="metricUptime">99.97%</span>
        </div>
      </div>
    </div>
  </section>

  <!-- ========== EXPLANATION ========== -->
  <section id="explanation" class="py-24 border-t border-border">
    <div class="max-w-[1400px] mx-auto px-6">
      <div class="max-w-2xl mb-16">
        <span class="font-mono text-[11px] text-flow uppercase tracking-widest">What you're looking at</span>
        <h2 class="font-display font-bold text-2xl md:text-3xl text-white mt-4 leading-tight">
          A live view of the Syncular sync engine.
        </h2>
        <p class="text-neutral-400 mt-4 leading-relaxed">
          The dashboard above isn't a mockup. It's a simulation of what Syncular actually tracks at runtime. Every client connection, every commit, every conflict resolution -- observable in real-time.
        </p>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        <!-- Annotation: Connected Clients -->
        <div class="dashboard-panel rounded-lg p-6">
          <div class="flex items-center gap-2 mb-4">
            <div class="w-8 h-8 rounded bg-healthy/10 flex items-center justify-center">
              <svg class="w-4 h-4 text-healthy" fill="currentColor" viewBox="0 0 20 20"><circle cx="10" cy="10" r="4"/></svg>
            </div>
            <span class="font-display font-semibold text-white">Connected Clients</span>
          </div>
          <p class="text-sm text-neutral-400 leading-relaxed">
            Every device running Syncular maintains a persistent identity. You see their connection status (online, syncing, offline), when they last synced, and their total commit count. This is how you debug sync issues -- by observing state, not guessing.
          </p>
        </div>

        <!-- Annotation: Sync Topology -->
        <div class="dashboard-panel rounded-lg p-6">
          <div class="flex items-center gap-2 mb-4">
            <div class="w-8 h-8 rounded bg-flow/10 flex items-center justify-center">
              <svg class="w-4 h-4 text-flow" fill="currentColor" viewBox="0 0 20 20"><path d="M10 2a8 8 0 100 16 8 8 0 000-16zm0 2a6 6 0 110 12 6 6 0 010-12zm0 2a4 4 0 100 8 4 4 0 000-8z"/></svg>
            </div>
            <span class="font-display font-semibold text-white">Sync Topology</span>
          </div>
          <p class="text-sm text-neutral-400 leading-relaxed">
            The node graph shows the server at the center -- the singularity of your sync universe. Clients orbit around it. Connection line thickness reflects sync activity. Dashed lines mean offline. You see the shape of your system at a glance.
          </p>
        </div>

        <!-- Annotation: Commit Stream -->
        <div class="dashboard-panel rounded-lg p-6">
          <div class="flex items-center gap-2 mb-4">
            <div class="w-8 h-8 rounded bg-syncing/10 flex items-center justify-center">
              <svg class="w-4 h-4 text-syncing" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 20 20"><path d="M4 4l4 4-4 4M10 16h6"/></svg>
            </div>
            <span class="font-display font-semibold text-white">Commit Stream</span>
          </div>
          <p class="text-sm text-neutral-400 leading-relaxed">
            A real-time log of every sync operation: pushes, pulls, acknowledgments, conflicts. Each entry shows the client, table, operation type, and commit count. Like a git log for your sync engine, flowing in real-time.
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- ========== CODE EXAMPLES ========== -->
  <section id="code" class="py-24 border-t border-border">
    <div class="max-w-[1400px] mx-auto px-6">
      <div class="max-w-2xl mb-16">
        <span class="font-mono text-[11px] text-flow uppercase tracking-widest">Developer experience</span>
        <h2 class="font-display font-bold text-2xl md:text-3xl text-white mt-4 leading-tight">
          Simple code. Observable power.
        </h2>
        <p class="text-neutral-400 mt-4 leading-relaxed">
          All that dashboard complexity comes from a handful of lines. Syncular handles the hard parts -- conflict resolution, offline queuing, incremental sync -- so you write normal database code.
        </p>
      </div>

      <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">

        <!-- Code 1: Client Setup -->
        <div class="code-block">
          <div class="code-header">
            <span class="w-2 h-2 rounded-full bg-healthy inline-block"></span>
            <span>client.ts</span>
            <span class="ml-auto text-neutral-600">Setup the client</span>
          </div>
          <pre class="font-mono text-[13px]"><code><span class="text-violet-400">import</span> <span class="text-neutral-300">{ createClient }</span> <span class="text-violet-400">from</span> <span class="text-emerald-400">'@syncular/client'</span>
<span class="text-violet-400">import</span> <span class="text-neutral-300">{ createHttpTransport }</span> <span class="text-violet-400">from</span> <span class="text-emerald-400">'@syncular/transport-http'</span>

<span class="text-violet-400">const</span> <span class="text-blue-300">client</span> <span class="text-neutral-500">=</span> <span class="text-yellow-300">createClient</span><span class="text-neutral-500">({</span>
  <span class="text-neutral-300">transport:</span> <span class="text-yellow-300">createHttpTransport</span><span class="text-neutral-500">({</span>
    <span class="text-neutral-300">baseUrl:</span> <span class="text-emerald-400">'https://api.example.com'</span>
  <span class="text-neutral-500">}),</span>
  <span class="text-neutral-300">tables:</span> <span class="text-neutral-500">{</span> <span class="text-neutral-300">todos:</span> <span class="text-neutral-500">{},</span> <span class="text-neutral-300">projects:</span> <span class="text-neutral-500">{}</span> <span class="text-neutral-500">}</span>
<span class="text-neutral-500">})</span></code></pre>
        </div>

        <!-- Code 2: Mutation -->
        <div class="code-block">
          <div class="code-header">
            <span class="w-2 h-2 rounded-full bg-syncing inline-block"></span>
            <span>mutation.ts</span>
            <span class="ml-auto text-neutral-600">Make a mutation</span>
          </div>
          <pre class="font-mono text-[13px]"><code><span class="text-neutral-500">// Writes go to local SQLite first, then sync</span>
<span class="text-violet-400">await</span> <span class="text-blue-300">client</span><span class="text-neutral-500">.</span><span class="text-blue-300">db</span>
  <span class="text-neutral-500">.</span><span class="text-yellow-300">insertInto</span><span class="text-neutral-500">(</span><span class="text-emerald-400">'todos'</span><span class="text-neutral-500">)</span>
  <span class="text-neutral-500">.</span><span class="text-yellow-300">values</span><span class="text-neutral-500">({</span>
    <span class="text-neutral-300">id:</span> <span class="text-yellow-300">crypto</span><span class="text-neutral-500">.</span><span class="text-yellow-300">randomUUID</span><span class="text-neutral-500">(),</span>
    <span class="text-neutral-300">title:</span> <span class="text-emerald-400">'Ship the feature'</span><span class="text-neutral-500">,</span>
    <span class="text-neutral-300">done:</span> <span class="text-orange-400">false</span>
  <span class="text-neutral-500">})</span>
  <span class="text-neutral-500">.</span><span class="text-yellow-300">execute</span><span class="text-neutral-500">()</span></code></pre>
        </div>

        <!-- Code 3: Reactive Query -->
        <div class="code-block">
          <div class="code-header">
            <span class="w-2 h-2 rounded-full bg-flow inline-block"></span>
            <span>component.tsx</span>
            <span class="ml-auto text-neutral-600">Reactive query (React)</span>
          </div>
          <pre class="font-mono text-[13px]"><code><span class="text-violet-400">import</span> <span class="text-neutral-300">{ useQuery }</span> <span class="text-violet-400">from</span> <span class="text-emerald-400">'@syncular/client-react'</span>

<span class="text-violet-400">function</span> <span class="text-yellow-300">TodoList</span><span class="text-neutral-500">() {</span>
  <span class="text-violet-400">const</span> <span class="text-blue-300">todos</span> <span class="text-neutral-500">=</span> <span class="text-yellow-300">useQuery</span><span class="text-neutral-500">(</span>
    <span class="text-neutral-500">(</span><span class="text-orange-300">db</span><span class="text-neutral-500">) =></span> <span class="text-orange-300">db</span><span class="text-neutral-500">.</span><span class="text-yellow-300">selectFrom</span><span class="text-neutral-500">(</span><span class="text-emerald-400">'todos'</span><span class="text-neutral-500">).</span><span class="text-yellow-300">selectAll</span><span class="text-neutral-500">().</span><span class="text-yellow-300">execute</span><span class="text-neutral-500">()</span>
  <span class="text-neutral-500">)</span>
  <span class="text-neutral-500">// Re-renders when any client pushes changes</span>
  <span class="text-violet-400">return</span> <span class="text-neutral-300">todos</span><span class="text-neutral-500">.</span><span class="text-yellow-300">map</span><span class="text-neutral-500">((</span><span class="text-orange-300">t</span><span class="text-neutral-500">) => <</span><span class="text-blue-300">Todo</span> <span class="text-neutral-300">key</span><span class="text-neutral-500">={</span><span class="text-orange-300">t</span><span class="text-neutral-500">.</span><span class="text-neutral-300">id</span><span class="text-neutral-500">}</span> <span class="text-neutral-300">todo</span><span class="text-neutral-500">={</span><span class="text-orange-300">t</span><span class="text-neutral-500">} />)</span>
<span class="text-neutral-500">}</span></code></pre>
        </div>

        <!-- Code 4: Server Setup -->
        <div class="code-block">
          <div class="code-header">
            <span class="w-2 h-2 rounded-full bg-violet-400 inline-block"></span>
            <span>server.ts</span>
            <span class="ml-auto text-neutral-600">Server setup</span>
          </div>
          <pre class="font-mono text-[13px]"><code><span class="text-violet-400">import</span> <span class="text-neutral-300">{ createServer }</span> <span class="text-violet-400">from</span> <span class="text-emerald-400">'@syncular/server'</span>
<span class="text-violet-400">import</span> <span class="text-neutral-300">{ createHonoApp }</span> <span class="text-violet-400">from</span> <span class="text-emerald-400">'@syncular/server-hono'</span>

<span class="text-violet-400">const</span> <span class="text-blue-300">server</span> <span class="text-neutral-500">=</span> <span class="text-yellow-300">createServer</span><span class="text-neutral-500">({</span>
  <span class="text-neutral-300">dialect:</span> <span class="text-emerald-400">'sqlite'</span><span class="text-neutral-500">,</span>
  <span class="text-neutral-300">tables:</span> <span class="text-neutral-500">{</span>
    <span class="text-neutral-300">todos:</span> <span class="text-neutral-500">{</span> <span class="text-neutral-300">columns:</span> <span class="text-neutral-500">{</span> <span class="text-neutral-300">title:</span> <span class="text-emerald-400">'text'</span><span class="text-neutral-500">,</span> <span class="text-neutral-300">done:</span> <span class="text-emerald-400">'boolean'</span> <span class="text-neutral-500">} },</span>
    <span class="text-neutral-300">projects:</span> <span class="text-neutral-500">{</span> <span class="text-neutral-300">columns:</span> <span class="text-neutral-500">{</span> <span class="text-neutral-300">name:</span> <span class="text-emerald-400">'text'</span> <span class="text-neutral-500">} }</span>
  <span class="text-neutral-500">}</span>
<span class="text-neutral-500">})</span>

<span class="text-violet-400">export default</span> <span class="text-yellow-300">createHonoApp</span><span class="text-neutral-500">({</span> <span class="text-neutral-300">server</span> <span class="text-neutral-500">})</span></code></pre>
        </div>

      </div>
    </div>
  </section>

  <!-- ========== ARCHITECTURE ========== -->
  <section id="architecture" class="py-24 border-t border-border">
    <div class="max-w-[1400px] mx-auto px-6">
      <div class="max-w-2xl mb-16">
        <span class="font-mono text-[11px] text-flow uppercase tracking-widest">Architecture</span>
        <h2 class="font-display font-bold text-2xl md:text-3xl text-white mt-4 leading-tight">
          How sync flows through the system.
        </h2>
        <p class="text-neutral-400 mt-4 leading-relaxed">
          Local SQLite on every client. Commit log for change tracking. Server as the single source of truth. Every client eventually converges.
        </p>
      </div>

      <!-- Architecture diagram -->
      <div class="dashboard-panel rounded-lg p-8 md:p-12 overflow-x-auto">
        <div class="flex items-center justify-center gap-0 min-w-[700px]">

          <!-- Client A -->
          <div class="flex flex-col items-center gap-2 shrink-0">
            <div class="w-32 border border-border rounded-lg p-4 text-center bg-panel">
              <div class="font-mono text-[10px] text-neutral-500 uppercase mb-1">Client A</div>
              <div class="font-mono text-xs text-white">SQLite</div>
              <div class="font-mono text-[10px] text-neutral-600 mt-1">outbox + local DB</div>
            </div>
          </div>

          <!-- Arrow -->
          <div class="flex flex-col items-center gap-1 px-3 shrink-0">
            <svg width="60" height="24" viewBox="0 0 60 24"><path d="M0 12h52m-6-5l6 5-6 5" stroke="#3b82f6" stroke-width="1.5" fill="none" stroke-linecap="round"/></svg>
            <span class="font-mono text-[9px] text-flow">HTTP / WS</span>
          </div>

          <!-- Transport -->
          <div class="flex flex-col items-center gap-2 shrink-0">
            <div class="w-28 border border-flow/30 rounded-lg p-4 text-center" style="background: rgba(59,130,246,0.05);">
              <div class="font-mono text-[10px] text-flow uppercase mb-1">Transport</div>
              <div class="font-mono text-xs text-white">Push / Pull</div>
              <div class="font-mono text-[10px] text-neutral-600 mt-1">delta sync</div>
            </div>
          </div>

          <!-- Arrow -->
          <div class="flex flex-col items-center gap-1 px-3 shrink-0">
            <svg width="60" height="24" viewBox="0 0 60 24"><path d="M0 12h52m-6-5l6 5-6 5" stroke="#3b82f6" stroke-width="1.5" fill="none" stroke-linecap="round"/></svg>
            <span class="font-mono text-[9px] text-flow">commits</span>
          </div>

          <!-- Server -->
          <div class="flex flex-col items-center gap-2 shrink-0">
            <div class="w-36 border-2 border-flow rounded-lg p-4 text-center relative" style="background: rgba(59,130,246,0.08); box-shadow: 0 0 20px rgba(59,130,246,0.15);">
              <div class="font-mono text-[10px] text-flow uppercase mb-1">Server</div>
              <div class="font-mono text-xs text-white font-medium">Commit Log</div>
              <div class="font-mono text-[10px] text-neutral-600 mt-1">source of truth</div>
            </div>
          </div>

          <!-- Arrow -->
          <div class="flex flex-col items-center gap-1 px-3 shrink-0">
            <svg width="60" height="24" viewBox="0 0 60 24"><path d="M0 12h52m-6-5l6 5-6 5" stroke="#3b82f6" stroke-width="1.5" fill="none" stroke-linecap="round"/></svg>
            <span class="font-mono text-[9px] text-flow">commits</span>
          </div>

          <!-- Transport -->
          <div class="flex flex-col items-center gap-2 shrink-0">
            <div class="w-28 border border-flow/30 rounded-lg p-4 text-center" style="background: rgba(59,130,246,0.05);">
              <div class="font-mono text-[10px] text-flow uppercase mb-1">Transport</div>
              <div class="font-mono text-xs text-white">Push / Pull</div>
              <div class="font-mono text-[10px] text-neutral-600 mt-1">delta sync</div>
            </div>
          </div>

          <!-- Arrow -->
          <div class="flex flex-col items-center gap-1 px-3 shrink-0">
            <svg width="60" height="24" viewBox="0 0 60 24"><path d="M0 12h52m-6-5l6 5-6 5" stroke="#3b82f6" stroke-width="1.5" fill="none" stroke-linecap="round"/></svg>
            <span class="font-mono text-[9px] text-flow">HTTP / WS</span>
          </div>

          <!-- Client B -->
          <div class="flex flex-col items-center gap-2 shrink-0">
            <div class="w-32 border border-border rounded-lg p-4 text-center bg-panel">
              <div class="font-mono text-[10px] text-neutral-500 uppercase mb-1">Client B</div>
              <div class="font-mono text-xs text-white">SQLite</div>
              <div class="font-mono text-[10px] text-neutral-600 mt-1">outbox + local DB</div>
            </div>
          </div>

        </div>
      </div>

      <!-- Architecture details -->
      <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mt-6">
        <div class="dashboard-panel rounded-lg p-5">
          <div class="font-mono text-[10px] text-healthy uppercase tracking-wider mb-2">Offline-First</div>
          <p class="text-sm text-neutral-400 leading-relaxed">All writes go to local SQLite. The app works with zero network. Sync happens when connectivity returns.</p>
        </div>
        <div class="dashboard-panel rounded-lg p-5">
          <div class="font-mono text-[10px] text-flow uppercase tracking-wider mb-2">Commit Log</div>
          <p class="text-sm text-neutral-400 leading-relaxed">Changes are tracked as immutable commits. The server maintains the canonical log. Clients replay to converge.</p>
        </div>
        <div class="dashboard-panel rounded-lg p-5">
          <div class="font-mono text-[10px] text-syncing uppercase tracking-wider mb-2">Conflict Resolution</div>
          <p class="text-sm text-neutral-400 leading-relaxed">Last-write-wins by default, with pluggable strategies. Conflicts are detected and resolved automatically.</p>
        </div>
        <div class="dashboard-panel rounded-lg p-5">
          <div class="font-mono text-[10px] text-violet-400 uppercase tracking-wider mb-2">Real-time</div>
          <p class="text-sm text-neutral-400 leading-relaxed">WebSocket transport for instant push notifications. Clients sync within milliseconds of server changes.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- ========== INSTALL ========== -->
  <section id="install" class="py-24 border-t border-border">
    <div class="max-w-[1400px] mx-auto px-6 text-center">
      <span class="font-mono text-[11px] text-flow uppercase tracking-widest">Get started</span>
      <h2 class="font-display font-bold text-2xl md:text-3xl text-white mt-4">
        Install in one command.
      </h2>
      <p class="text-neutral-400 mt-4 max-w-lg mx-auto">
        Syncular is modular. Install the client, server, and transport packages you need.
      </p>

      <div class="mt-10 inline-block">
        <div class="code-block text-left" style="min-width: 480px;">
          <div class="code-header">
            <span class="w-2 h-2 rounded-full bg-healthy inline-block"></span>
            <span>terminal</span>
          </div>
          <pre class="font-mono text-sm px-6 py-4"><code><span class="text-neutral-500">$</span> <span class="text-white">bun add @syncular/client @syncular/server</span>
<span class="text-neutral-500">$</span> <span class="text-white">bun add @syncular/transport-http</span>
<span class="text-neutral-600"># Optional: WebSocket transport for real-time</span>
<span class="text-neutral-500">$</span> <span class="text-white">bun add @syncular/transport-ws</span></code></pre>
        </div>
      </div>

      <div class="mt-10 flex items-center justify-center gap-4">
        <a href="#" class="font-display font-medium text-sm bg-flow text-white px-6 py-2.5 rounded hover:bg-blue-600 transition-colors">Read the docs</a>
        <a href="https://github.com/patchwork-body/syncular" class="font-display font-medium text-sm border border-border text-neutral-300 px-6 py-2.5 rounded hover:border-neutral-500 hover:text-white transition-colors">View on GitHub</a>
      </div>
    </div>
  </section>

  <!-- ========== FOOTER ========== -->
  <footer class="border-t border-border py-10">
    <div class="max-w-[1400px] mx-auto px-6 flex items-center justify-between">
      <div class="flex items-center gap-3">
        <span class="font-display font-bold text-white text-sm">syncular</span>
        <span class="w-1.5 h-1.5 rounded-full bg-healthy inline-block" style="box-shadow: 0 0 4px #22c55e;"></span>
      </div>
      <div class="font-mono text-[11px] text-neutral-600">
        Offline-first sync for SQLite. Open source.
      </div>
    </div>
  </footer>

  <!-- ========== JAVASCRIPT: Dashboard Simulation ========== -->
  <script>
    // ---- Client Data ----
    const clients = [
      { id: 'client-a', type: 'mobile',  status: 'online',  lastSync: 2,   commits: 847,  color: '#22c55e', via: 'direct' },
      { id: 'client-b', type: 'desktop', status: 'online',  lastSync: 0,   commits: 1203, color: '#22c55e', via: 'direct' },
      { id: 'client-c', type: 'tablet',  status: 'syncing', lastSync: 0,   commits: 445,  color: '#f59e0b', syncingCommits: 3, via: 'direct' },
      { id: 'client-d', type: 'edge',    status: 'offline', lastSync: 240, commits: 201,  color: '#ef4444', via: 'direct' },
      { id: 'client-e', type: 'mobile',  status: 'online',  lastSync: 1,   commits: 312,  color: '#22c55e', via: 'relay' },
      { id: 'client-f', type: 'laptop',  status: 'online',  lastSync: 3,   commits: 589,  color: '#22c55e', via: 'relay' },
      { id: 'client-g', type: 'iot',     status: 'offline', lastSync: 180, commits: 67,   color: '#ef4444', via: 'relay' },
    ];

    const tables = ['todos', 'projects', 'notes', 'users'];
    const operations = ['INSERT', 'UPDATE', 'DELETE'];
    const streamOps = ['PUSH', 'PULL', 'ACK', 'PUSH', 'PULL', 'PUSH'];

    // ---- Render Client List ----
    function renderClients() {
      const el = document.getElementById('clientList');
      el.innerHTML = clients.map(c => {
        const dotClass = c.status === 'online' ? 'dot-online' : c.status === 'syncing' ? 'dot-syncing' : 'dot-offline';
        const dotChar = c.status === 'online' ? '\u25CF' : c.status === 'syncing' ? '\u25D0' : '\u25CB';
        const statusColor = c.status === 'online' ? 'text-emerald-500' : c.status === 'syncing' ? 'text-amber-500' : 'text-red-500';
        const syncText = c.status === 'syncing'
          ? `pushing ${c.syncingCommits} commits...`
          : c.lastSync === 0 ? 'just now' : c.lastSync < 60 ? `${c.lastSync}s ago` : `${Math.floor(c.lastSync / 60)}m ago`;

        return `
          <div class="flex items-start gap-3 px-3 py-2.5 rounded hover:bg-white/[0.02] transition-colors">
            <span class="font-mono text-sm ${dotClass} mt-0.5 shrink-0">${dotChar}</span>
            <div class="flex-1 min-w-0">
              <div class="flex items-center gap-2">
                <span class="font-mono text-xs text-white truncate">${c.id}</span>
                <span class="font-mono text-[10px] text-neutral-600">(${c.type})</span>${c.via === 'relay' ? '<span class="font-mono text-[9px] text-violet-400/60 border border-violet-400/20 rounded px-1 ml-1">relay</span>' : ''}
              </div>
              <div class="flex items-center gap-3 mt-0.5">
                <span class="font-mono text-[10px] ${statusColor}">${c.status}</span>
                <span class="font-mono text-[10px] text-neutral-600">sync: ${syncText}</span>
              </div>
              <div class="font-mono text-[10px] text-neutral-600 mt-0.5">
                commits: <span class="text-neutral-400">${c.commits.toLocaleString()}</span>
              </div>
            </div>
          </div>`;
      }).join('');
    }

    // ---- Render Node Graph (SVG) ----
    function renderNodeGraph() {
      const svg = document.getElementById('nodeGraph');
      const serverX = 195, serverY = 210;
      const relayX = 465, relayY = 210;

      // Fixed positions: direct clients on left, relay clients on right
      const nodePositions = {
        'client-a': { x: 52, y: 100 },
        'client-b': { x: 38, y: 220 },
        'client-c': { x: 52, y: 340 },
        'client-d': { x: 195, y: 390 },
        'client-e': { x: 608, y: 100 },
        'client-f': { x: 622, y: 220 },
        'client-g': { x: 608, y: 340 },
      };

      let svgContent = '';

      // Background orbit arcs
      svgContent += `<ellipse cx="${serverX}" cy="${serverY}" rx="155" ry="155" fill="none" stroke="#1a1a1a" stroke-width="1" stroke-dasharray="4 8"/>`;
      svgContent += `<ellipse cx="${relayX}" cy="${relayY}" rx="140" ry="140" fill="none" stroke="#1a1a1a" stroke-width="1" stroke-dasharray="4 8"/>`;

      // Server ↔ Relay backbone connection
      svgContent += `<line x1="${serverX}" y1="${serverY}" x2="${relayX}" y2="${relayY}" stroke="#8b5cf6" stroke-width="2" opacity="0.4"/>`;
      svgContent += `<line x1="${serverX}" y1="${serverY}" x2="${relayX}" y2="${relayY}" stroke="#8b5cf6" stroke-width="1" class="line-active" opacity="0.7"/>`;
      // Backbone particles
      svgContent += `
        <circle r="3" fill="#8b5cf6" opacity="0.9">
          <animateMotion dur="2s" repeatCount="indefinite" path="M${serverX},${serverY} L${relayX},${relayY}"/>
          <animate attributeName="opacity" values="0;0.9;0.9;0" dur="2s" repeatCount="indefinite"/>
        </circle>
        <circle r="3" fill="#8b5cf6" opacity="0.9">
          <animateMotion dur="2s" begin="1s" repeatCount="indefinite" path="M${relayX},${relayY} L${serverX},${serverY}"/>
          <animate attributeName="opacity" values="0;0.9;0.9;0" dur="2s" begin="1s" repeatCount="indefinite"/>
        </circle>
      `;
      // Backbone label
      svgContent += `<text x="${(serverX + relayX) / 2}" y="${serverY - 18}" text-anchor="middle" fill="#8b5cf6" font-family="JetBrains Mono" font-size="8" opacity="0.5" letter-spacing="1.5">BACKBONE</text>`;

      // Draw connection lines from clients to their target (server or relay)
      clients.forEach(c => {
        const pos = nodePositions[c.id];
        if (!pos) return;
        const targetX = c.via === 'relay' ? relayX : serverX;
        const targetY = c.via === 'relay' ? relayY : serverY;

        let lineClass = 'line-active';
        let strokeColor = '#22c55e';
        let strokeWidth = 1.5;

        if (c.status === 'syncing') {
          lineClass = 'line-syncing';
          strokeColor = '#f59e0b';
          strokeWidth = 2.5;
        } else if (c.status === 'offline') {
          lineClass = 'line-offline';
          strokeColor = '#ef4444';
          strokeWidth = 1;
        }

        svgContent += `<line x1="${targetX}" y1="${targetY}" x2="${pos.x}" y2="${pos.y}" stroke="${strokeColor}" stroke-width="${strokeWidth}" class="${lineClass}"/>`;
      });

      // Data flow particles along active connections
      clients.forEach(c => {
        const pos = nodePositions[c.id];
        if (!pos || c.status === 'offline') return;
        const targetX = c.via === 'relay' ? relayX : serverX;
        const targetY = c.via === 'relay' ? relayY : serverY;
        const particleColor = c.status === 'syncing' ? '#f59e0b' : '#22c55e';
        const dur = c.status === 'syncing' ? '1.2s' : '2.5s';

        svgContent += `
          <circle r="2" fill="${particleColor}" opacity="0.8">
            <animateMotion dur="${dur}" repeatCount="indefinite" path="M${targetX},${targetY} L${pos.x},${pos.y}"/>
            <animate attributeName="opacity" values="0;0.8;0.8;0" dur="${dur}" repeatCount="indefinite"/>
          </circle>
          <circle r="2" fill="${particleColor}" opacity="0.6">
            <animateMotion dur="${dur}" begin="${parseFloat(dur)/2}s" repeatCount="indefinite" path="M${pos.x},${pos.y} L${targetX},${targetY}"/>
            <animate attributeName="opacity" values="0;0.6;0.6;0" dur="${dur}" begin="${parseFloat(dur)/2}s" repeatCount="indefinite"/>
          </circle>
        `;
      });

      // Server node (center-left) with pulse rings
      svgContent += `
        <circle cx="${serverX}" cy="${serverY}" r="40" fill="none" stroke="#3b82f6" stroke-width="0.5" opacity="0.15">
          <animate attributeName="r" from="30" to="58" dur="3s" repeatCount="indefinite"/>
          <animate attributeName="opacity" from="0.3" to="0" dur="3s" repeatCount="indefinite"/>
        </circle>
        <circle cx="${serverX}" cy="${serverY}" r="40" fill="none" stroke="#3b82f6" stroke-width="0.5" opacity="0.15">
          <animate attributeName="r" from="30" to="58" dur="3s" begin="1.5s" repeatCount="indefinite"/>
          <animate attributeName="opacity" from="0.3" to="0" dur="3s" begin="1.5s" repeatCount="indefinite"/>
        </circle>
        <circle cx="${serverX}" cy="${serverY}" r="30" fill="#0c0c0c" stroke="#3b82f6" stroke-width="2" style="filter: drop-shadow(0 0 10px rgba(59,130,246,0.4));"/>
        <circle cx="${serverX}" cy="${serverY}" r="16" fill="rgba(59,130,246,0.15)" stroke="#3b82f6" stroke-width="1"/>
        <circle cx="${serverX}" cy="${serverY}" r="5" fill="#3b82f6"/>
        <text x="${serverX}" y="${serverY + 46}" text-anchor="middle" fill="#555" font-family="JetBrains Mono" font-size="9" letter-spacing="2">SERVER</text>
      `;

      // Relay node (center-right) with pulse ring
      svgContent += `
        <circle cx="${relayX}" cy="${relayY}" r="35" fill="none" stroke="#8b5cf6" stroke-width="0.5" opacity="0.15">
          <animate attributeName="r" from="24" to="48" dur="3.5s" repeatCount="indefinite"/>
          <animate attributeName="opacity" from="0.25" to="0" dur="3.5s" repeatCount="indefinite"/>
        </circle>
        <circle cx="${relayX}" cy="${relayY}" r="24" fill="#0c0c0c" stroke="#8b5cf6" stroke-width="2" style="filter: drop-shadow(0 0 8px rgba(139,92,246,0.35));"/>
        <circle cx="${relayX}" cy="${relayY}" r="12" fill="rgba(139,92,246,0.15)" stroke="#8b5cf6" stroke-width="1"/>
        <circle cx="${relayX}" cy="${relayY}" r="4" fill="#8b5cf6"/>
        <text x="${relayX}" y="${relayY + 40}" text-anchor="middle" fill="#555" font-family="JetBrains Mono" font-size="9" letter-spacing="2">RELAY</text>
      `;

      // Client nodes
      clients.forEach(c => {
        const pos = nodePositions[c.id];
        if (!pos) return;
        const fillColor = c.status === 'online' ? '#22c55e' : c.status === 'syncing' ? '#f59e0b' : '#ef4444';
        const ringOpacity = c.status === 'offline' ? 0.3 : 1;

        svgContent += `
          <g opacity="${ringOpacity}">
            <circle cx="${pos.x}" cy="${pos.y}" r="18" fill="#0c0c0c" stroke="${fillColor}" stroke-width="1.5"/>
            <circle cx="${pos.x}" cy="${pos.y}" r="4" fill="${fillColor}"/>
            <text x="${pos.x}" y="${pos.y + 28}" text-anchor="middle" fill="#444" font-family="JetBrains Mono" font-size="8">${c.id}</text>
            <text x="${pos.x}" y="${pos.y + 38}" text-anchor="middle" fill="#333" font-family="JetBrains Mono" font-size="7">${c.type}${c.via === 'relay' ? ' · relay' : ''}</text>
          </g>
        `;
      });

      svg.innerHTML = svgContent;
    }

    // ---- Commit Stream ----
    let streamCounter = 0;
    const streamEl = document.getElementById('streamEntries');

    function getTimestamp() {
      const now = new Date();
      return now.toTimeString().split(' ')[0] + '.' + String(now.getMilliseconds()).padStart(3, '0');
    }

    function addStreamEntry() {
      const op = streamOps[Math.floor(Math.random() * streamOps.length)];
      const onlineClients = clients.filter(c => c.status !== 'offline');
      const client = onlineClients[Math.floor(Math.random() * onlineClients.length)];
      const table = tables[Math.floor(Math.random() * tables.length)];
      const mutation = operations[Math.floor(Math.random() * operations.length)];
      const commits = Math.ceil(Math.random() * 5);
      const ts = getTimestamp();

      let opColor = 'text-emerald-500';
      let detail = '';

      if (op === 'PUSH') {
        opColor = 'text-amber-400';
        detail = `<span class="text-neutral-500">${table}</span>  <span class="text-neutral-400">${mutation}</span>  <span class="text-neutral-500">+${commits} commit${commits > 1 ? 's' : ''}</span>`;
      } else if (op === 'PULL') {
        opColor = 'text-emerald-400';
        detail = `<span class="text-neutral-500">${table}</span>  <span class="text-neutral-400">+${commits} commit${commits > 1 ? 's' : ''}</span> <span class="text-neutral-600">(synced)</span>`;
      } else {
        opColor = 'text-blue-400';
        detail = `<span class="text-neutral-500">sync complete</span> <span class="text-neutral-600">(0 conflicts)</span>`;
      }

      const entry = document.createElement('div');
      entry.className = 'stream-entry font-mono text-[9px] leading-5 whitespace-nowrap';
      entry.innerHTML = `<span class="text-neutral-600">${ts}</span>  <span class="${opColor} font-medium">${op.padEnd(4)}</span>  <span class="text-neutral-400">${client.id.padEnd(10)}</span>  ${detail}`;

      // Insert at top
      if (streamEl.firstChild) {
        streamEl.insertBefore(entry, streamEl.firstChild);
      } else {
        streamEl.appendChild(entry);
      }

      // Keep max 40 entries
      while (streamEl.children.length > 40) {
        streamEl.removeChild(streamEl.lastChild);
      }

      streamCounter++;
    }

    // ---- Metrics Updates ----
    function updateMetrics() {
      const commitRate = (10 + Math.random() * 8).toFixed(1);
      const latency = Math.floor(25 + Math.random() * 30);
      const activeCount = clients.filter(c => c.status !== 'offline').length;

      document.getElementById('metricCommits').textContent = commitRate;
      document.getElementById('metricLatency').textContent = latency + 'ms';
      document.getElementById('metricActive').textContent = `${activeCount}/${clients.length} nodes`;
      document.getElementById('streamRate').textContent = commitRate + '/s';
    }

    // ---- Simulate Client Status Changes ----
    function simulateClientC() {
      const c = clients[2]; // client-c
      if (c.status === 'syncing') {
        // Finish syncing
        setTimeout(() => {
          c.status = 'online';
          c.color = '#22c55e';
          c.commits += c.syncingCommits;
          c.lastSync = 0;
          renderClients();
          renderNodeGraph();

          // Start syncing again after a while
          setTimeout(() => {
            c.status = 'syncing';
            c.color = '#f59e0b';
            c.syncingCommits = Math.ceil(Math.random() * 5) + 1;
            renderClients();
            renderNodeGraph();
            simulateClientC();
          }, 8000 + Math.random() * 6000);
        }, 3000 + Math.random() * 2000);
      }
    }

    function simulateClientD() {
      const d = clients[3]; // client-d
      // Periodically reconnect
      setTimeout(() => {
        d.status = 'syncing';
        d.color = '#f59e0b';
        d.syncingCommits = Math.ceil(Math.random() * 8) + 2;
        renderClients();
        renderNodeGraph();

        setTimeout(() => {
          d.status = 'online';
          d.color = '#22c55e';
          d.commits += d.syncingCommits;
          d.lastSync = 0;
          renderClients();
          renderNodeGraph();

          // Go offline again after some time
          setTimeout(() => {
            d.status = 'offline';
            d.color = '#ef4444';
            d.lastSync = 0;
            renderClients();
            renderNodeGraph();
            simulateClientD();
          }, 5000 + Math.random() * 5000);
        }, 2000 + Math.random() * 2000);
      }, 12000 + Math.random() * 8000);
    }

    function simulateClientG() {
      const g = clients[6]; // client-g (iot, via relay)
      setTimeout(() => {
        g.status = 'syncing';
        g.color = '#f59e0b';
        g.syncingCommits = Math.ceil(Math.random() * 4) + 1;
        renderClients();
        renderNodeGraph();

        setTimeout(() => {
          g.status = 'online';
          g.color = '#22c55e';
          g.commits += g.syncingCommits;
          g.lastSync = 0;
          renderClients();
          renderNodeGraph();

          setTimeout(() => {
            g.status = 'offline';
            g.color = '#ef4444';
            g.lastSync = 0;
            renderClients();
            renderNodeGraph();
            simulateClientG();
          }, 6000 + Math.random() * 6000);
        }, 2000 + Math.random() * 1500);
      }, 15000 + Math.random() * 10000);
    }

    // ---- Increment last sync timers ----
    function tickSyncTimers() {
      clients.forEach(c => {
        if (c.status !== 'syncing') {
          c.lastSync++;
        }
      });
      renderClients();
    }

    // ---- Increment commit counts for active clients ----
    function tickCommits() {
      clients.forEach(c => {
        if (c.status === 'online') {
          c.commits += Math.floor(Math.random() * 3);
        }
      });
    }

    // ---- Initialize ----
    renderClients();
    renderNodeGraph();

    // Pre-populate stream with a few entries
    for (let i = 0; i < 12; i++) {
      addStreamEntry();
    }

    // Start intervals
    setInterval(addStreamEntry, 800 + Math.random() * 400);
    setInterval(updateMetrics, 2000);
    setInterval(tickSyncTimers, 1000);
    setInterval(tickCommits, 3000);
    setInterval(() => renderClients(), 1000);

    simulateClientC();
    simulateClientD();
    simulateClientG();
  </script>

</body>
</html>